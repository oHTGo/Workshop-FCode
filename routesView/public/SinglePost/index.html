<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SinglePost</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="../HomePage/HomePage.css" />
    <link rel="stylesheet" href="SinglePost.css" />
    <script
      src="https://kit.fontawesome.com/9ba09bf17b.js"
      crossorigin="anonymous"
    ></script>
    <style>
      .loader {
    position: fixed;
    z-index: 99;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: white;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  .loader > img {
    width: 100px;
  }
  
  .loader.hidden {
    animation: fadeOut 1s;
    animation-fill-mode: forwards;
  }
  
  @keyframes fadeOut {
    100% {
        opacity: 0;
        visibility: hidden;
    }
  }
  </style>
    
  </head>

  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-white navbar-center">
        <a class="navbar-brand" href="../HomePage">
          <img src="../img/rsz_logo_2000x2000 (1).png" alt="logo" width="40" height="40">
        </a>
        <button class="navbar-toggler " type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
  
        <div class="collapse navbar-collapse  bg-white" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto ">
            <li class="nav-item bg-white">
              <a class="nav-link" href="../HomePage">
                <i class="fas fa-home"></i>
                Home<span class="sr-only"></span>
              </a>
            </li>
            <li class="nav-item bg-white">
              <a class="nav-link" href="../CreatePost" onclick="resetTopicId()">
                <i class="far fa-calendar-plus"></i>
                Create</a>
            </li>
            <li class="nav-item bg-white">
              <a class="nav-link" href="/Schedule">
                <i class="fas fa-calendar-alt"></i>
                Schedule</a>
            </li>
            <li class="nav-item dropdown bg-white">
              <a class="nav-link dropdown-toggle" href="#" id="userAccount" role="button" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                <i class="fas fa-user"></i>
                
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="../UserPosts">
                  <i class="fas fa-chart-bar"></i>
                  User status</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="/logout">
                  <i class="fas fa-sign-out-alt"></i>
                  Logout</a>
              </div>
            </li>
          </ul>
          <!-- <form class="form-inline my-2 my-lg-0  bg-white">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
          </form> -->
        </div>
      </nav>
  
      <div class="collapse navbar-collapse  bg-white" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto ">
          <li class="nav-item bg-white">
            <a class="nav-link" href="../HomePage">Home <span class="sr-only"></span></a>
          </li>
          <li class="nav-item bg-white">
            <a class="nav-link" href="../CreatePost" onclick="resetTopicId()">Create</a>
          </li>
          <li class="nav-item bg-white">
            <a class="nav-link" href="../Schedule">Schedule</a>
          </li>
          <li class="nav-item dropdown bg-white">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="../UserPosts/">User status</a>
              <div class="dropdown-divider"></div>
  
              <a class="dropdown-item" href="/logout">Logout</a>
            </div>
          </li>
        </ul>
        <!-- <form class="form-inline my-2 my-lg-0  bg-white">
          <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form> -->
      </div>
      </nav>
    </header>

    <main>
      <div class="loader">
        <img src="../img/loading.gif" alt="Loading..." />
      </div>
      <div class="singlepost__content">
        <div class="singlepost__wrapper col-lg-7 col-xs-12" id="singlepost-wrapper">
          
          <div class="post__footer">
            <button
              type="button"
              class="btn btn-primary joinButton"
              id="joinedButton"
              onclick="changeState()"
            >
              JOIN US
            </button>

            <button
              type="button"
              class="btn btn-primary showlistButton"
              data-toggle="modal"
              data-target="#listModal"
              id="showlistButton"
            >
              List
            </button>
            <div
              class="modal fade"
              id="listModal"
              tabindex="-1"
              role="dialog"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">
                      List of members joined this topic
                    </h5>
                    <button
                      type="button"
                      class="close"
                      data-dismiss="modal"
                      aria-label="Close"
                    >
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">    
                    <ul class="list-group" id="memberList">
                      
                    </ul>                
                  </div>
                  <div class="modal-footer">
                    <button
                      type="button"
                      class="btn btn-secondary"
                      data-dismiss="modal"
                    >
                      Close
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <button
              type="button"
              class="btn btn-primary rateButton"
              data-toggle="modal"
              data-target="#exampleModal"
              id="rateButton"
            >
              RATE THIS POST
            </button>

            <!-- Modal -->
            <div
              class="modal fade"
              id="exampleModal"
              tabindex="-1"
              role="dialog"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">
                      Rate for this post
                    </h5>
                    <button
                      type="button"
                      class="close"
                      data-dismiss="modal"
                      aria-label="Close"
                    >
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <!----------------Rating star----------->
                    <span
                      onmouseover="starmark(this)"
                      onclick="starmark(this)"
                      id="1one"
                      style="font-size: 25px; cursor: pointer"
                      class="fa fa-star checked"
                    ></span>
                    <span
                      onmouseover="starmark(this)"
                      onclick="starmark(this)"
                      id="2one"
                      style="font-size: 25px; cursor: pointer"
                      class="fa fa-star"
                    ></span>
                    <span
                      onmouseover="starmark(this)"
                      onclick="starmark(this)"
                      id="3one"
                      style="font-size: 25px; cursor: pointer"
                      class="fa fa-star"
                    ></span>
                    <span
                      onmouseover="starmark(this)"
                      onclick="starmark(this)"
                      id="4one"
                      style="font-size: 25px; cursor: pointer"
                      class="fa fa-star"
                    ></span>
                    <span
                      onmouseover="starmark(this)"
                      onclick="starmark(this)"
                      id="5one"
                      style="font-size: 25px; cursor: pointer"
                      class="fa fa-star"
                    ></span>
                    <!-------------------End rating star-------------->
                    <br />

                    <!--------------Rating text------->
                    <textarea
                      style="margin-top: 5px"
                      class="form-control"
                      rows="3"
                      id="comment"
                      placeholder="Enter your review"
                      maxlength="200"
                    ></textarea>
                  </div>
                  <div class="modal-footer">
                    <button
                      type="button"
                      class="btn btn-secondary"
                      data-dismiss="modal"
                    >
                      Close
                    </button>
                    <button             
                      type="button"
                      class="btn btn-primary btn-danger deleteButton"
                      id="deleteButton"
                      onclick="deleteReview()"
                    >
                      Delete
                    </button>
                    <button
                      onclick="review()"
                      type="button"
                      class="btn btn-primary btn-success"
                    >
                      Submit
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Comment section -->
          <div class="comment__section">
            <h4>Comments</h4>
            <div class="comment__wrapper" id="comment-wrapper">
              
            </div>
          </div>
        </div>

        <!-- Browsing and ranking area  -->
        <div class="homepage__side col-lg-5 col-xs-12">
          <!-- <div class="homepage__browse">
            <h3>Browse by categories</h3>
            <div class="browse__tags">
              <a href="#">FrontEnd</a>
              <a href="#">BackEnd</a>
              <a href="#">Network</a>
              <a href="#">Mobile</a>
              <a href="#">Web</a>
              <a href="#">Android</a>
              <a href="#">IOS</a>
              <a href="#">Others</a>
            </div>
          </div> -->
          <div class="homepage__ranking">
            <img src="../img/rocket.svg" class="ranking__icon">
            <h3>Most popular</h3>
            <table class="ranking_table">
              <tr>
                <th>Top</th>
                <th>Post</th>
                <th>Rate</th>
              </tr>
  
              <tr>
                <td><img src="../img/goldmedal.svg"></td>
                <td id="rank1"></td>
                <td>
                  <span id="rate1"></span>
                  <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="currentColor"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                  </svg>
                </td>
              </tr>
  
              <tr>
                <td><img src="../img/silvermedal.svg"></td>
                <td id="rank2"></td>
                <td>
                  <span id="rate2"></span>
                  <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="currentColor"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                  </svg>
                </td>
              </tr>
  
              <tr>
                <td><img src="../img/bronzemedal.svg"></td>
                <td id="rank3"></td>
                <td>
                  <span id="rate3"></span>
                  <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="currentColor"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                  </svg>
                </td>
              </tr>
  
              <tr>
                <td>4</td>
                <td id="rank4"></td>
                <td>
                  <span id="rate4"></span>
                  <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="currentColor"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                  </svg>
                </td>
              </tr>
  
              <tr>
                <td>5</td>
                <td id="rank5"></td>
                <td>
                  <span id="rate5"></span>
                  <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="currentColor"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                  </svg>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <div class="footer__title col-lg-3 ">
        <h3>F-Code Workshop</h3>
        <img src="../img/rsz_logo_2000x2000 (1).png">
      </div>
      <div class="footer__description col-lg-6 ">
        <P>Knowledge shared is knowledge squared</P>
      </div>
      <div class="footer__contact col-lg-3 ">
        <h3>Contact</h3>
        <div class="contact__icons">
          <a href="https://www.facebook.com/fcodefpt" target="_blank"><img src="../img/facebook.svg"></a>
          <a href="mailto: fcode.fptuhcm@gmail.com"><img src="../img/gmail.svg"></a>
        </div>
      </div>
  
      <div class="footer__copyright">Â© F-Code Club 2020</div>
    </footer>

    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <script>
      function checkLogin() {
        fetch('/api/user/current').then((res) => {
          if (res.status == 401) {
            location.replace('../index.html');
          }
        }).catch(error => console.log(error))
      } 
      checkLogin(); 
    </script>
    <script>
      window.addEventListener('load', function () {
        const loader = document.querySelector(".loader");
      loader.className += " hidden"; // class "loader hidden"
      })
    </script>
    <script src="SinglePost.js"></script>
    
    <script src="../lib/moment.js"></script>
    
  </body>
</html>
